<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30 National Current Affairs - Concept ki Pathshala</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; transition: all 0.3s ease; }
        .sticky-panel { position: sticky; top: 1rem; }
        .question-btn.active { background-color: #2563eb; color: white; border-color: #2563eb; }
        .question-btn.answered { background-color: #10b981; color: white; border-color: #10b981; }
        .option-label { transition: all 0.2s; cursor: pointer; }
        .option-input:checked + .option-label { background-color: #dbeafe; border-color: #3b82f6; }
        @media print {
            .no-print { display: none; }
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50 no-print">
        <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="bg-blue-600 p-1.5 rounded-lg text-white">
                    <i class="fas fa-pen-nib"></i>
                </div>
                <span class="font-bold text-slate-800 text-lg hidden md:block">Concept ki Pathshala</span>
            </div>
            
            <div class="flex items-center space-x-2 md:space-x-6">
                <!-- Language Toggle -->
                <button onclick="toggleLanguage()" class="flex items-center bg-slate-100 hover:bg-slate-200 px-3 py-1.5 rounded-lg border border-slate-300 transition text-sm font-bold text-slate-700">
                    <i class="fas fa-language mr-2 text-blue-600"></i>
                    <span id="lang-text">English</span>
                </button>

                <div class="text-slate-600 font-medium text-sm md:text-base">
                    <i class="far fa-clock mr-1"></i><span id="timer-label">Time:</span> <span id="timer" class="text-blue-600 font-bold">30:00</span>
                </div>
                
                <button onclick="confirmSubmit()" class="bg-red-600 text-white px-3 md:px-4 py-1.5 rounded-lg font-bold hover:bg-red-700 transition text-sm">
                    Submit
                </button>
            </div>
        </div>
    </header>

    <main id="quiz-view" class="max-w-7xl mx-auto px-4 py-8 no-print">
        <div class="grid lg:grid-cols-4 gap-8">
            
            <!-- Left Side: Question Display -->
            <div class="lg:col-span-3 space-y-6">
                <div id="quiz-container" class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-slate-200">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-blue-600 font-bold uppercase tracking-wider text-sm">
                            <span id="q-label">Question</span> <span id="current-q-num">1</span> / 30
                        </span>
                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold">1 Mark</span>
                    </div>
                    
                    <h2 id="question-text" class="text-xl md:text-2xl font-bold text-slate-800 mb-8 leading-snug"></h2>
                    
                    <div id="options-container" class="space-y-4">
                        <!-- Options injected here -->
                    </div>

                    <div class="flex justify-between items-center mt-10 pt-6 border-t border-slate-100">
                        <button onclick="prevQuestion()" id="prev-btn" class="flex items-center text-slate-500 font-bold hover:text-blue-600 disabled:opacity-30">
                            <i class="fas fa-chevron-left mr-2"></i> <span id="prev-text">Previous</span>
                        </button>
                        <button onclick="nextQuestion()" id="next-btn" class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition">
                            <span id="next-text">Save & Next</span> <i class="fas fa-chevron-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Side: Navigation Panel -->
            <div class="lg:col-span-1">
                <div class="sticky-panel space-y-6">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4 flex items-center">
                            <i class="fas fa-th mr-2 text-blue-500"></i> <span id="palette-label">Question Palette</span>
                        </h3>
                        <div id="palette-container" class="grid grid-cols-5 gap-2">
                            <!-- Buttons -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for User Info -->
    <div id="info-modal" class="fixed inset-0 bg-slate-900/80 z-[100] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl">
            <h2 class="text-2xl font-bold text-slate-800 mb-2" id="modal-title">Final Step</h2>
            <p class="text-slate-500 mb-6" id="modal-desc">Enter your details to finalize your submission.</p>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-1" id="label-name">Full Name</label>
                    <input type="text" id="user-name" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-1" id="label-exam">Targeted Exam</label>
                    <select id="user-exam" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none">
                        <option>SSC GD / CGL</option>
                        <option>Railway / NTPC</option>
                        <option>Bihar Police / Daroga</option>
                        <option>Indian Army</option>
                        <option>Other Govt Exams</option>
                    </select>
                </div>
                <button onclick="generateResult()" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold hover:bg-blue-700 transition mt-4" id="btn-gen">
                    Generate Score Card
                </button>
            </div>
        </div>
    </div>

    <!-- Result View -->
    <div id="result-view" class="fixed inset-0 bg-slate-50 z-[110] hidden overflow-y-auto">
        <div class="max-w-3xl mx-auto px-4 py-12">
            <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200">
                <div class="bg-blue-600 p-10 text-center text-white">
                    <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-trophy text-4xl"></i>
                    </div>
                    <h2 class="text-3xl font-bold mb-1">Performance Report</h2>
                    <p class="text-blue-100">Concept ki Pathshala</p>
                </div>
                
                <div class="p-8">
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="bg-slate-50 p-4 rounded-2xl text-center">
                            <p class="text-slate-500 text-xs font-bold uppercase mb-1">Score</p>
                            <p class="text-3xl font-black text-slate-800"><span id="res-score">0</span> / 30</p>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-2xl text-center">
                            <p class="text-slate-500 text-xs font-bold uppercase mb-1">Accuracy</p>
                            <p class="text-3xl font-black text-slate-800" id="res-acc">0%</p>
                        </div>
                    </div>

                    <div class="space-y-4 mb-10">
                        <div class="flex justify-between py-3 border-b border-slate-100">
                            <span class="text-slate-500" id="res-label-name">Student Name</span>
                            <span class="font-bold text-slate-800" id="res-name">-</span>
                        </div>
                        <div class="flex justify-between py-3 border-b border-slate-100">
                            <span class="text-slate-500" id="res-label-exam">Exam Category</span>
                            <span class="font-bold text-slate-800" id="res-exam-cat">-</span>
                        </div>
                        <div class="flex justify-between py-3 border-b border-slate-100">
                            <span class="text-slate-500" id="res-label-status">Status</span>
                            <span class="font-bold" id="res-status">Passed</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 no-print">
                        <button onclick="downloadResult()" class="flex items-center justify-center bg-slate-800 text-white py-4 rounded-xl font-bold hover:bg-slate-900 transition">
                            <i class="fas fa-print mr-2"></i> <span id="btn-print-text">Print Result</span>
                        </button>
                        <button onclick="shareToWhatsapp()" class="flex items-center justify-center bg-green-600 text-white py-4 rounded-xl font-bold hover:bg-green-700 transition">
                            <i class="fab fa-whatsapp mr-2"></i> <span id="btn-wa-text">WhatsApp</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questionsData = [
            { 
                qh: "वरिष्ठ नागरिकों और दिव्यांगों के लिए भारत का पहला 'ग्रे स्मार्ट टॉयलेट' कहाँ बनाया गया है?", 
                qe: "Where has India's first 'Grey Smart Toilet' for senior citizens and differently-abled been built?",
                ah: "देहरादून (उत्तराखंड)", 
                ae: "Dehradun (Uttarakhand)",
                oh: ["ऋषिकेश", "देहरादून (उत्तराखंड)", "शिमला", "चंडीगढ़"],
                oe: ["Rishikesh", "Dehradun (Uttarakhand)", "Shimla", "Chandigarh"]
            },
            { 
                qh: "अनुसूचित जाति आयोग द्वारा किस राज्य में अलग 'कोर्ट रूम' स्थापित किया गया है?", 
                qe: "In which state has a separate 'Court Room' been established by the SC Commission?",
                ah: "पंजाब", ae: "Punjab",
                oh: ["हरियाणा", "राजस्थान", "पंजाब", "उत्तर प्रदेश"],
                oe: ["Haryana", "Rajasthan", "Punjab", "Uttar Pradesh"]
            },
            { 
                qh: "साइबर धोखाधड़ी कॉल सेंटर में 100% प्रतिक्रिया दर हासिल करने वाली भारत की पहली पुलिस कौन सी है?", 
                qe: "Which is India's first police force to achieve a 100% response rate in cyber fraud call centers?",
                ah: "गोवा पुलिस", ae: "Goa Police",
                oh: ["दिल्ली पुलिस", "गोवा पुलिस", "मुंबई पुलिस", "केरल पुलिस"],
                oe: ["Delhi Police", "Goa Police", "Mumbai Police", "Kerala Police"]
            },
            { 
                qh: "संशोधित 'भारत नेट योजना' को लागू करने वाला देश का प्रथम राज्य कौन सा है?", 
                qe: "Which is the first state in the country to implement the revised 'Bharat Net Project'?",
                ah: "पंजाब", ae: "Punjab",
                oh: ["गुजरात", "महाराष्ट्र", "पंजाब", "कर्नाटक"],
                oe: ["Gujarat", "Maharashtra", "Punjab", "Karnataka"]
            },
            { 
                qh: "हेलीकॉप्टर पर्यटन सेवा शुरू करने वाला भारत का पहला राज्य कौन सा बना है?", 
                qe: "Which has become the first state in India to start helicopter tourism services?",
                ah: "मध्य प्रदेश", ae: "Madhya Pradesh",
                oh: ["उत्तराखंड", "मध्य प्रदेश", "हिमाचल प्रदेश", "सिक्किम"],
                oe: ["Uttarakhand", "Madhya Pradesh", "Himachal Pradesh", "Sikkim"]
            },
            { 
                qh: "शहरी सार्वजनिक परिवहन के लिए रोपवे सेवा शुरू करने वाला भारत का पहला शहर कौन सा है?", 
                qe: "Which is the first city in India to start Ropeway services for urban public transport?",
                ah: "वाराणसी", ae: "Varanasi",
                oh: ["शिमला", "हरिद्वार", "वाराणसी", "गुवाहाटी"],
                oe: ["Shimla", "Haridwar", "Varanasi", "Guwahati"]
            },
            { 
                qh: "रेलवे पटरियों के बीच पोर्टेबल सोलर पैनल स्थापित करने वाला भारत का पहला शहर कौन सा है?", 
                qe: "Which is the first city in India to install portable solar panels between railway tracks?",
                ah: "वाराणसी", ae: "Varanasi",
                oh: ["इंदौर", "वाराणसी", "बेंगलुरु", "सूरत"],
                oe: ["Indore", "Varanasi", "Bengaluru", "Surat"]
            },
            { 
                qh: "किस राज्य सरकार ने हाल ही में मदरसा बोर्ड को खत्म करने का फैसला किया है?", 
                qe: "Which state government recently decided to abolish the Madarsa Board?",
                ah: "उत्तराखंड", ae: "Uttarakhand",
                oh: ["असम", "उत्तर प्रदेश", "उत्तराखंड", "मध्य प्रदेश"],
                oe: ["Assam", "Uttar Pradesh", "Uttarakhand", "Madhya Pradesh"]
            },
            { 
                qh: "राष्ट्रपति द्रौपदी मुर्मू ने अपने कार्यकाल में पहली बार किस राज्य की विधानसभा को संबोधित किया?", 
                qe: "President Droupadi Murmu addressed which state assembly for the first time in her tenure?",
                ah: "ओडिशा", ae: "Odisha",
                oh: ["झारखंड", "ओडिशा", "बिहार", "छत्तीसगढ़"],
                oe: ["Jharkhand", "Odisha", "Bihar", "Chhattisgarh"]
            },
            { 
                qh: "100 ट्रिलियन रुपये का कुल कारोबार पार करने वाला भारत का पहला बैंक कौन सा है?", 
                qe: "Which is the first bank in India to cross a total turnover of 100 trillion rupees?",
                ah: "स्टेट बैंक ऑफ इंडिया (SBI)", ae: "State Bank of India (SBI)",
                oh: ["HDFC बैंक", "ICICI बैंक", "स्टेट बैंक ऑफ इंडिया (SBI)", "पंजाब नेशनल बैंक"],
                oe: ["HDFC Bank", "ICICI Bank", "State Bank of India (SBI)", "PNB"]
            },
            { 
                qh: "भारत के 53वें मुख्य न्यायाधीश (CJI) के रूप में किसे नियुक्त किया गया है?", 
                qe: "Who has been appointed as the 53rd Chief Justice of India (CJI)?",
                ah: "न्यायूमूर्ति सूर्यकांत", ae: "Justice Surya Kant",
                oh: ["न्यायूमूर्ति डी.वाई. चंद्रचूड़", "न्यायूमूर्ति संजीव खन्ना", "न्यायूमूर्ति सूर्यकांत", "न्यायूमूर्ति बी.आर. गवई"],
                oe: ["Justice D.Y. Chandrachud", "Justice Sanjiv Khanna", "Justice Surya Kant", "Justice B.R. Gavai"]
            },
            { 
                qh: "नवीनतम NCRB रिपोर्ट के अनुसार, भारत का सबसे सुरक्षित शहर कौन सा घोषित किया गया है?", 
                qe: "According to the latest NCRB report, which city has been declared the safest in India?",
                ah: "कोलकाता", ae: "Kolkata",
                oh: ["पुणे", "चेन्नई", "कोलकाता", "हैदराबाद"],
                oe: ["Pune", "Chennai", "Kolkata", "Hyderabad"]
            },
            { 
                qh: "भारत का पहला 'झुग्गी मुक्त शहर' होने का दर्जा किस शहर को मिला है?", 
                qe: "Which city has been granted the status of India's first 'Slum-Free City'?",
                ah: "चंडीगढ़", ae: "Chandigarh",
                oh: ["नवी मुंबई", "इंदौर", "चंडीगढ़", "गांधीनगर"],
                oe: ["Navi Mumbai", "Indore", "Chandigarh", "Gandhinagar"]
            },
            { 
                qh: "किस राज्य ने हाल ही में 'धर्मान्तरण विरोधी विधेयक 2025' पारित किया है?", 
                qe: "Which state recently passed the 'Anti-Conversion Bill 2025'?",
                ah: "राजस्थान", ae: "Rajasthan",
                oh: ["मध्य प्रदेश", "गुजरात", "राजस्थान", "हरियाणा"],
                oe: ["Madhya Pradesh", "Gujarat", "Rajasthan", "Haryana"]
            },
            { 
                qh: "'नो हेलमेट, नो फ्यूल' अभियान किस राज्य में सख्ती से शुरू किया गया है?", 
                qe: "In which state has the 'No Helmet, No Fuel' campaign been strictly launched?",
                ah: "उत्तर प्रदेश", ae: "Uttar Pradesh",
                oh: ["बिहार", "उत्तर प्रदेश", "दिल्ली", "पंजाब"],
                oe: ["Bihar", "Uttar Pradesh", "Delhi", "Punjab"]
            },
            { 
                qh: "PATA गोल्ड अवार्ड 2025 किस राज्य के पर्यटन विभाग ने जीता है?", 
                qe: "Which state's tourism department won the PATA Gold Award 2025?",
                ah: "केरल पर्यटन", ae: "Kerala Tourism",
                oh: ["गोवा पर्यटन", "राजस्थान पर्यटन", "केरल पर्यटन", "लद्दाख पर्यटन"],
                oe: ["Goa Tourism", "Rajasthan Tourism", "Kerala Tourism", "Ladakh Tourism"]
            },
            { 
                qh: "भारत के किस राज्य में महिलाओं के मुद्दों के लिए 'नारी अदालत' की शुरुआत की गई है?", 
                qe: "In which Indian state has 'Nari Adalat' (Women's Court) been started for women's issues?",
                ah: "सिक्किम", ae: "Sikkim",
                oh: ["असम", "सिक्किम", "मेघालय", "त्रिपुरा"],
                oe: ["Assam", "Sikkim", "Meghalaya", "Tripura"]
            },
            { 
                qh: "सौर ऊर्जा से पूरी तरह संचालित होने वाली भारत की पहली विधानसभा कौन सी है?", 
                qe: "Which is the first assembly in India to be fully powered by solar energy?",
                ah: "दिल्ली विधानसभा", ae: "Delhi Assembly",
                oh: ["गुजरात विधानसभा", "दिल्ली विधानसभा", "केरल विधानसभा", "गोवा विधानसभा"],
                oe: ["Gujarat Assembly", "Delhi Assembly", "Kerala Assembly", "Goa Assembly"]
            },
            { 
                qh: "आर्टिफिशियल इंटेलिजेंस (AI) से संचालित भारत की पहली आंगनवाड़ी किस राज्य में शुरू हुई है?", 
                qe: "In which state has India's first AI-powered Anganwadi started?",
                ah: "महाराष्ट्र", ae: "Maharashtra",
                oh: ["कर्नाटक", "तमिलनाडु", "महाराष्ट्र", "तेलंगाना"],
                oe: ["Karnataka", "Tamil Nadu", "Maharashtra", "Telangana"]
            },
            { 
                qh: "भारत में सबसे अधिक अंगदान (Organ Donation) करने के लिए किस राज्य को पुरस्कार मिला है?", 
                qe: "Which state received the award for the highest organ donation in India?",
                ah: "तेलंगाना", ae: "Telangana",
                oh: ["तमिलनाडु", "तेलंगाना", "गुजरात", "केरल"],
                oe: ["Tamil Nadu", "Telangana", "Gujarat", "Kerala"]
            },
            { 
                qh: "भारत की पहली हाइड्रोजन-संचालित ट्रेन कोच का सफल परीक्षण कहाँ किया गया?", 
                qe: "Where was the successful trial of India's first hydrogen-powered train coach conducted?",
                ah: "चेन्नई", ae: "Chennai",
                oh: ["कपूरथला", "चेन्नई", "रायबरेली", "बेंगलुरु"],
                oe: ["Kapurthala", "Chennai", "Raebareli", "Bengaluru"]
            },
            { 
                qh: "हाल ही में 4500 वर्ष पुरानी हड़प्पा सभ्यता के अवशेष किस स्थान पर मिले हैं?", 
                qe: "Where were 4500-year-old remains of the Harappan civilization recently found?",
                ah: "जैसलमेर (राजस्थान)", ae: "Jaisalmer (Rajasthan)",
                oh: ["राखीगढ़ी (हरियाणा)", "जैसलमेर (राजस्थान)", "धोलावीरा (गुजरात)", "रोपड़ (पंजाब)"],
                oe: ["Rakhigarhi", "Jaisalmer", "Dholavira", "Ropar"]
            },
            { 
                qh: "किस राज्य ने देवदासी प्रथा को पूरी तरह खत्म करने के लिए नया कानून प्रस्तावित किया है?", 
                qe: "Which state has proposed a new law to completely abolish the Devadasi system?",
                ah: "कर्नाटक", ae: "Karnataka",
                oh: ["आंध्र प्रदेश", "कर्नाटक", "तमिलनाडु", "ओडिशा"],
                oe: ["Andhra Pradesh", "Karnataka", "Tamil Nadu", "Odisha"]
            },
            { 
                qh: "इग्नू (IGNOU) की पहली महिला कुलपति (Vice-Chancellor) कौन बनी हैं?", 
                qe: "Who has become the first woman Vice-Chancellor of IGNOU?",
                ah: "प्रो. उमा कांजीलाल", ae: "Prof. Uma Kanjilal",
                oh: ["प्रो. नजमा अख्तर", "प्रो. उमा कांजीलाल", "प्रो. शांतिश्री धूलिपुड़ी", "प्रो. सुधीर जैन"],
                oe: ["Prof. Najma Akhtar", "Prof. Uma Kanjilal", "Prof. S. Dhulipudi", "Prof. Sudhir Jain"]
            },
            { 
                qh: "भारत के पहले 'एक्वा टेक पार्क' की स्थापना किस राज्य में की जा रही है?", 
                qe: "In which state is India's first 'Aqua Tech Park' being established?",
                ah: "असम", ae: "Assam",
                oh: ["पश्चिम बंगाल", "असम", "ओडिशा", "आंध्र प्रदेश"],
                oe: ["West Bengal", "Assam", "Odisha", "Andhra Pradesh"]
            },
            { 
                qh: "भारत का पहला 'AI-प्लस कैंपस' कहाँ खोला जाएगा?", 
                qe: "Where will India's first 'AI-Plus Campus' be opened?",
                ah: "अमरावती", ae: "Amaravati",
                oh: ["हैदराबाद", "अमरावती", "बेंगलुरु", "नोएडा"],
                oe: ["Hyderabad", "Amaravati", "Bengaluru", "Noida"]
            },
            { 
                qh: "भारत का पहला 'डिजिटल घुमंतू गांव' 'याकतेन' किस राज्य में स्थित है?", 
                qe: "In which state is India's first 'Digital Nomad Village' named 'Yakten' located?",
                ah: "सिक्किम", ae: "Sikkim",
                oh: ["हिमाचल प्रदेश", "सिक्किम", "उत्तराखंड", "अरुणाचल प्रदेश"],
                oe: ["Himachal Pradesh", "Sikkim", "Uttarakhand", "Arunachal Pradesh"]
            },
            { 
                qh: "भारत का पहला ISO प्रमाणित पुलिस स्टेशन कौन सा बना है?", 
                qe: "Which has become India's first ISO certified police station?",
                ah: "आर्थुंकल पुलिस स्टेशन (केरल)", ae: "Arthunkal Police Station (Kerala)",
                oh: ["कालूपुर पुलिस स्टेशन (गुजरात)", "आर्थुंकल पुलिस स्टेशन (केरल)", "कोहिमा पुलिस स्टेशन (नागालैंड)", "मिंटो रोड पुलिस स्टेशन (दिल्ली)"],
                oe: ["Kalupur PS", "Arthunkal PS (Kerala)", "Kohima PS", "Minto Road PS"]
            },
            { 
                qh: "'Time 100 क्रिएटर्स-2025' की सूची में शामिल होने वाली प्रथम भारतीय महिला कौन हैं?", 
                qe: "Who is the first Indian woman to be included in the 'Time 100 Creators-2025' list?",
                ah: "प्राजक्ता कोली", ae: "Prajakta Koli",
                oh: ["कुशा कपिला", "प्राजक्ता कोली", "डॉली सिंह", "रणवीर अल्लाहबादिया"],
                oe: ["Kusha Kapila", "Prajakta Koli", "Dolly Singh", "Ranveer Allahbadia"]
            },
            { 
                qh: "ड्रोन प्रशिक्षण के लिए असम राइफल्स ने किस संस्थान के साथ समझौता किया है?", 
                qe: "With which institution has Assam Rifles signed an MoU for drone training?",
                ah: "IIIT मणिपुर", ae: "IIIT Manipur",
                oh: ["IIT बॉम्बे", "IIIT मणिपुर", "NIT सिलचर", "BITS पिलानी"],
                oe: ["IIT Bombay", "IIIT Manipur", "NIT Silchar", "BITS Pilani"]
            }
        ];

        let currentLang = 'hi'; // 'hi' or 'en'
        let shuffledQuestions = [];
        let currentIndex = 0;
        let userAnswers = new Array(30).fill(null);
        let timeLeft = 30 * 60; 
        let timerInterval;

        const uiLabels = {
            hi: {
                timer: "समय:",
                qLabel: "प्रश्न",
                prev: "पिछला",
                next: "सहेजें और अगला",
                palette: "प्रश्न पैलेट",
                submit: "सबमिट",
                mTitle: "अंतिम चरण",
                mDesc: "अपनी स्कोर कार्ड देखने के लिए विवरण दर्ज करें।",
                lName: "पूरा नाम",
                lExam: "लक्षित परीक्षा",
                btnGen: "स्कोर कार्ड बनाएं",
                resName: "छात्र का नाम",
                resExam: "परीक्षा श्रेणी",
                resStatus: "स्थिति",
                btnPrint: "परिणाम प्रिंट करें",
                btnWA: "व्हाट्सएप शेयर"
            },
            en: {
                timer: "Time:",
                qLabel: "Question",
                prev: "Previous",
                next: "Save & Next",
                palette: "Question Palette",
                submit: "Submit",
                mTitle: "Final Step",
                mDesc: "Enter details to see your score card.",
                lName: "Full Name",
                lExam: "Targeted Exam",
                btnGen: "Generate Score Card",
                resName: "Student Name",
                resExam: "Exam Category",
                resStatus: "Status",
                btnPrint: "Print Result",
                btnWA: "WhatsApp Share"
            }
        };

        function toggleLanguage() {
            currentLang = (currentLang === 'hi' ? 'en' : 'hi');
            document.getElementById('lang-text').textContent = (currentLang === 'hi' ? 'English' : 'हिंदी');
            updateUILabels();
            displayQuestion();
        }

        function updateUILabels() {
            const labels = uiLabels[currentLang];
            document.getElementById('timer-label').textContent = labels.timer;
            document.getElementById('q-label').textContent = labels.qLabel;
            document.getElementById('prev-text').textContent = labels.prev;
            document.getElementById('next-text').textContent = labels.next;
            document.getElementById('palette-label').textContent = labels.palette;
            
            // Modal
            document.getElementById('modal-title').textContent = labels.mTitle;
            document.getElementById('modal-desc').textContent = labels.mDesc;
            document.getElementById('label-name').textContent = labels.lName;
            document.getElementById('label-exam').textContent = labels.lExam;
            document.getElementById('btn-gen').textContent = labels.btnGen;

            // Result
            document.getElementById('res-label-name').textContent = labels.resName;
            document.getElementById('res-label-exam').textContent = labels.resExam;
            document.getElementById('res-label-status').textContent = labels.resStatus;
            document.getElementById('btn-print-text').textContent = labels.btnPrint;
            document.getElementById('btn-wa-text').textContent = labels.btnWA;
        }

        function initQuiz() {
            shuffledQuestions = questionsData.map(q => {
                // Shuffle options keeping pairs intact
                const indices = [0, 1, 2, 3].sort(() => Math.random() - 0.5);
                return {
                    qh: q.qh, qe: q.qe,
                    ah: q.ah, ae: q.ae,
                    oh: indices.map(i => q.oh[i]),
                    oe: indices.map(i => q.oe[i])
                };
            }).sort(() => Math.random() - 0.5);
            
            renderPalette();
            updateUILabels();
            displayQuestion();
            startTimer();
        }

        function renderPalette() {
            const container = document.getElementById('palette-container');
            container.innerHTML = '';
            for (let i = 0; i < 30; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = `question-btn w-10 h-10 rounded-lg border-2 text-sm font-bold transition-all ${userAnswers[i] ? 'answered' : 'border-slate-200 text-slate-400'}`;
                btn.id = `palette-btn-${i}`;
                btn.onclick = () => jumpToQuestion(i);
                container.appendChild(btn);
            }
            updatePaletteUI();
        }

        function updatePaletteUI() {
            for (let i = 0; i < 30; i++) {
                const btn = document.getElementById(`palette-btn-${i}`);
                if (!btn) continue;
                btn.classList.remove('active');
                if (i === currentIndex) btn.classList.add('active');
                if (userAnswers[i] !== null) btn.classList.add('answered');
            }
        }

        function displayQuestion() {
            const q = shuffledQuestions[currentIndex];
            document.getElementById('current-q-num').textContent = currentIndex + 1;
            document.getElementById('question-text').textContent = currentLang === 'hi' ? q.qh : q.qe;
            
            const optionsBox = document.getElementById('options-container');
            optionsBox.innerHTML = '';
            
            const options = currentLang === 'hi' ? q.oh : q.oe;
            // Note: We need to store the index to know which one was picked regardless of translation
            options.forEach((opt, idx) => {
                const div = document.createElement('div');
                // Check if user answer matches the English or Hindi version of this specific option index
                const isChecked = (userAnswers[currentIndex] === q.oh[idx] || userAnswers[currentIndex] === q.oe[idx]) ? 'checked' : '';
                
                div.innerHTML = `
                    <input type="radio" name="answer" id="opt-${idx}" value="${idx}" class="hidden option-input" ${isChecked} onchange="saveAnswer(${idx})">
                    <label for="opt-${idx}" class="option-label flex items-center p-4 rounded-xl border-2 border-slate-200 hover:border-blue-400 font-medium text-slate-700">
                        <span class="w-8 h-8 rounded-full border-2 border-slate-300 flex items-center justify-center mr-4 text-xs font-bold bg-white">${String.fromCharCode(65 + idx)}</span>
                        ${opt}
                    </label>
                `;
                optionsBox.appendChild(div);
            });

            document.getElementById('prev-btn').disabled = currentIndex === 0;
            updatePaletteUI();
        }

        function saveAnswer(idx) {
            // Save the Hindi version as the constant reference
            userAnswers[currentIndex] = shuffledQuestions[currentIndex].oh[idx];
            updatePaletteUI();
        }

        function nextQuestion() {
            if (currentIndex < 29) {
                currentIndex++;
                displayQuestion();
            } else {
                confirmSubmit();
            }
        }

        function prevQuestion() {
            if (currentIndex > 0) {
                currentIndex--;
                displayQuestion();
            }
        }

        function jumpToQuestion(idx) {
            currentIndex = idx;
            displayQuestion();
        }

        function startTimer() {
            const timerEl = document.getElementById('timer');
            timerInterval = setInterval(() => {
                const mins = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    autoSubmit();
                }
                timeLeft--;
            }, 1000);
        }

        function confirmSubmit() {
            const answeredCount = userAnswers.filter(a => a !== null).length;
            const msg = currentLang === 'hi' 
                ? `आपने 30 में से ${answeredCount} प्रश्नों के उत्तर दिए हैं। क्या आप सबमिट करना चाहते हैं?`
                : `You have answered ${answeredCount} out of 30 questions. Do you want to submit?`;
            if (confirm(msg)) {
                clearInterval(timerInterval);
                showInfoModal();
            }
        }

        function autoSubmit() {
            alert(currentLang === 'hi' ? 'समय समाप्त! टेस्ट सबमिट हो रहा है।' : 'Time up! Submitting test.');
            showInfoModal();
        }

        function showInfoModal() {
            document.getElementById('info-modal').classList.remove('hidden');
        }

        function generateResult() {
            const name = document.getElementById('user-name').value.trim();
            if (!name) return alert(currentLang === 'hi' ? 'कृपया नाम लिखें' : 'Please enter name');

            let score = 0;
            userAnswers.forEach((ans, i) => {
                if (ans === shuffledQuestions[i].ah) {
                    score++;
                }
            });

            const accuracy = Math.round((score / 30) * 100);
            document.getElementById('res-name').textContent = name;
            document.getElementById('res-score').textContent = score;
            document.getElementById('res-acc').textContent = accuracy + '%';
            document.getElementById('res-exam-cat').textContent = document.getElementById('user-exam').value;
            
            const statusEl = document.getElementById('res-status');
            if(score >= 15) {
                statusEl.textContent = currentLang === 'hi' ? "उत्तीर्ण" : "Passed";
                statusEl.className = "font-bold text-green-600";
            } else {
                statusEl.textContent = currentLang === 'hi' ? "सुधार की आवश्यकता" : "Improvement Needed";
                statusEl.className = "font-bold text-red-600";
            }

            document.getElementById('info-modal').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
        }

        function shareToWhatsapp() {
            const name = document.getElementById('res-name').textContent;
            const score = document.getElementById('res-score').textContent;
            const text = `*Concept ki Pathshala - Score Report*%0A*Name:* ${name}%0A*Score:* ${score}/30%0A_via Pathshala Portal_`;
            window.open(`https://wa.me/919504111765?text=${text}`);
        }

        function downloadResult() {
            window.print();
        }

        window.onload = initQuiz;
    </script>
</body>
</html>
